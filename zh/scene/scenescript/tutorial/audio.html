<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用 SceneScript 处理音频数据 | Wallpaper Engine - 设计文档中文版</title>
    <meta name="generator" content="VuePress 1.5.2">
    <meta name="description" content="本网站涵盖了Wallpaper Engine为壁纸创作者提供的设计功能">
    <link rel="preload" href="/wallpaper-engine-docs/assets/css/0.styles.6b07116f.css" as="style"><link rel="preload" href="/wallpaper-engine-docs/assets/js/app.a9f24f61.js" as="script"><link rel="preload" href="/wallpaper-engine-docs/assets/js/9.94e6aa3a.js" as="script"><link rel="preload" href="/wallpaper-engine-docs/assets/js/1.53c8499c.js" as="script"><link rel="preload" href="/wallpaper-engine-docs/assets/js/325.1db59ae4.js" as="script"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/10.8aab97ae.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/100.63b46d3f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/101.72deb809.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/102.7ec52d89.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/103.2cdbe062.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/104.9bdca092.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/105.bebe7652.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/106.2f249b77.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/107.92c958ae.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/108.f1cab495.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/109.2b867ea4.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/11.f8b30274.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/110.633d6cd2.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/111.a459df62.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/112.1b4da4cb.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/113.c02184c3.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/114.5d37e83b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/115.013ea614.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/116.785db91c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/117.216b890f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/118.342e40b2.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/119.ff364b32.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/12.d771cff8.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/120.91aba1ed.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/121.6eb487a9.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/122.26dd4ccf.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/123.fe824114.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/124.e478dd0a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/125.c22ef460.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/126.405d1899.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/127.fb928f82.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/128.e97a006b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/129.4456280d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/13.d018b77c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/130.7d7d3a6e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/131.76af4dca.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/132.34f46596.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/133.806a2233.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/134.1a820a34.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/135.8dd2fc26.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/136.718125af.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/137.45f85606.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/138.a1c55984.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/139.aaf1d006.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/14.efe4a2d8.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/140.90e47371.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/141.59ccb9d6.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/142.4a7892fb.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/143.a3da2bf7.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/144.47d605af.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/145.f1b8429c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/146.8664624f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/147.159e6f18.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/148.b9468916.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/149.f60a90e0.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/15.4f68d3cc.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/150.121ecb67.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/151.09131d23.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/152.84427cc6.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/153.0a909d5c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/154.dc3b18b9.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/155.2a38c6f4.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/156.c4d29c03.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/157.f0902efe.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/158.433e2b01.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/159.7859577f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/16.c1637c05.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/160.e67246df.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/161.1fb607a5.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/162.96305df4.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/163.8e6d668b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/164.44d49658.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/165.c1d00b57.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/166.7d47b122.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/167.6a736e2e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/168.f0b0587e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/169.439962ed.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/17.7a5200b9.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/170.6b77479b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/171.977420e8.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/172.265a6611.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/173.a09e0b2a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/174.b97489c8.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/175.2aeb35ff.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/176.f57f0259.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/177.62410ab4.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/178.1cf856e9.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/179.406b60a8.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/18.bd24d7ea.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/180.6df97a9b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/181.7e9b2a78.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/182.b4ab985d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/183.85b02424.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/184.09280046.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/185.f66856cd.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/186.002e8e6b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/187.3a00282e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/188.cdf1b68c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/189.0341c66a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/19.4c651f0e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/190.a259c3bd.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/191.0c3a4aea.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/192.06c34b8d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/193.1a7fc496.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/194.7ed5c013.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/195.f67219af.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/196.bac6d90b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/197.a139efda.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/198.9aaf841e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/199.217cf1d2.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/20.eb743823.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/200.7cab470d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/201.5231d805.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/202.36905d79.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/203.c6f0b959.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/204.8f19f3df.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/205.bb38f85c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/206.efd2742b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/207.cb38ee9d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/208.3f023855.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/209.300f090b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/21.5654ed3f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/210.330f8449.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/211.f8179155.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/212.4231f3af.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/213.338f6b65.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/214.b34a1138.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/215.04cf7d05.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/216.b1d70d41.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/217.dd52c961.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/218.479daeae.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/219.90ce8db9.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/22.e3684094.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/220.c6b3cf1c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/221.b10e2bdf.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/222.d73c7332.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/223.9f2b0c45.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/224.e10fe3c3.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/225.5a6ba39d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/226.6f7bbcfd.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/227.a611024a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/228.54f20586.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/229.2a8ffb65.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/23.c1f92043.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/230.341676b2.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/231.2202235a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/232.49437f91.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/233.e92bf8fe.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/234.1f6ba5e9.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/235.76ae7d07.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/236.5e8e5a0e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/237.113e012d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/238.b2a3577b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/239.2523fb75.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/24.2b6b7ad5.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/240.3c419eb1.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/241.8845477c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/242.7d10aa8e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/243.fea8d908.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/244.c8dc3a60.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/245.2e1b0875.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/246.952718fc.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/247.09b93032.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/248.8f63acda.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/249.6b070c6b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/25.5e471b2e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/250.69ba03c3.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/251.4212adb6.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/252.e35dc6d5.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/253.1d842265.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/254.cbaab520.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/255.f0b7c49d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/256.0e923f1c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/257.eef6c8ea.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/258.cfe8dcc3.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/259.e101030c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/26.b924904a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/260.0de3b3e2.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/261.3afadc32.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/262.11709ea5.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/263.caaf0c7f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/264.d674cccf.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/265.4aedf01e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/266.0de20f81.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/267.692f043f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/268.28e01e5d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/269.4d0a3f9e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/27.6c606f56.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/270.f009f7a5.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/271.c791bd07.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/272.b6cdfc05.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/273.2bfc88b3.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/274.26657a8b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/275.183703bb.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/276.1d5ae6a0.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/277.9cd514da.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/278.ecaca6d4.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/279.ac949d75.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/28.0bdb735c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/280.796f46d2.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/281.b9b37458.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/282.bccee208.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/283.11683fd2.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/284.df6efc67.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/285.b771d49a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/286.90a35d46.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/287.da51c376.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/288.f22c395a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/289.67444e26.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/29.65bd56b4.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/290.1d3f8689.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/291.cb9d3de9.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/292.4e83747d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/293.13ab5131.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/294.8963461d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/295.667e5c74.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/296.30c9b4c6.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/297.e1ef63cb.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/298.72b6e7e4.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/299.70179d84.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/3.5ab43318.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/30.53dd0e48.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/300.a7c476dd.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/301.8771b0ad.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/302.97000713.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/303.256bbad7.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/304.9771178f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/305.187fb155.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/306.5ef056dd.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/307.e0dd65f2.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/308.2d9c8036.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/309.a4bea179.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/31.39957165.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/310.ee404c97.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/311.6e2f221b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/312.61881504.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/313.a9f73ff6.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/314.ed283ab8.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/315.cbed59b9.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/316.4e35a97b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/317.5abeff7b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/318.787b3369.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/319.f061c72c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/32.80d41f87.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/320.40c7dcab.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/321.34300cf6.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/322.4ba46af9.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/323.288e3c70.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/324.6e75d221.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/326.e77b6e8f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/327.b3c9c758.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/328.9b6ec65f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/329.20d89e7a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/33.fa2f6d17.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/330.14a3e1ee.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/331.06bc085d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/332.7237621a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/333.931a2d74.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/334.d86fec77.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/335.bc16c549.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/336.675774bf.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/337.81b9f9da.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/338.ab38f56c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/339.65291801.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/34.117580e0.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/340.99a4f2fb.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/341.5359e048.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/342.28eeaec8.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/343.a8a53129.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/344.6002dd10.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/345.e52a2eb4.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/346.1634ce41.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/347.b84c58f1.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/348.068ef688.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/349.45294a35.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/35.ecb92ba3.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/350.97d43490.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/351.c248da30.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/352.c642f16a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/353.21650e73.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/354.6a396868.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/355.924125fb.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/356.02b11160.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/357.3bc434cf.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/358.44c39895.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/359.78b0cc1f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/36.90307284.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/37.26409a71.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/38.3f9918f7.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/39.731addc4.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/4.57846675.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/40.835d87fc.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/41.73ab293a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/42.faf9afda.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/43.013a4952.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/44.159382f8.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/45.ddfe2f5c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/46.b9465cde.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/47.8fdfccb0.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/48.902816d3.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/49.b8d159df.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/5.078b8f47.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/50.a35f54de.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/51.dec9bad6.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/52.909d40e9.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/53.ebed301d.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/54.8faadd26.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/55.bb4fe927.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/56.3ade4a17.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/57.aab608bf.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/58.06e8c392.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/59.b79bdc7f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/6.ba882e4a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/60.595e7724.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/61.a8f8c428.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/62.151d68f6.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/63.e1a0cf7c.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/64.8c53fbd6.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/65.9814c33a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/66.e639d869.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/67.98ea5af8.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/68.f239ba52.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/69.6d42ebff.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/7.226085d1.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/70.5e4b08fc.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/71.3d8f1348.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/72.054269fb.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/73.53a5f5f1.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/74.cdc5745a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/75.a3162b12.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/76.77b11318.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/77.6203605b.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/78.7fa7aab2.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/79.195197c5.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/8.68f953c1.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/80.5f560608.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/81.3e479c60.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/82.d2bdc1c9.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/83.a79e44ad.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/84.ffa4b30a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/85.51a22171.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/86.fe491cc7.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/87.03799e71.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/88.55bcac76.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/89.e3caf5e2.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/90.1c2eeae4.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/91.d0d25e83.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/92.b7c51d0f.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/93.59ab9587.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/94.99ba2bee.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/95.22193263.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/96.a3b1fa1e.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/97.e1e1f77a.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/98.3d7cf043.js"><link rel="prefetch" href="/wallpaper-engine-docs/assets/js/99.aa53e7df.js">
    <link rel="stylesheet" href="/wallpaper-engine-docs/assets/css/0.styles.6b07116f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wallpaper-engine-docs/zh/" class="home-link router-link-active"><img src="/wallpaper-engine-docs/img/wallpaper_engine_logo_small.png" alt="Wallpaper Engine - 设计文档中文版" class="logo"> <span class="site-name can-hide">Wallpaper Engine - 设计文档中文版</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wallpaper-engine-docs/scene/overview.html" class="nav-link">
  场景壁纸指南
</a></div><div class="nav-item"><a href="/wallpaper-engine-docs/web/overview.html" class="nav-link">
  Web壁纸指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中文" class="dropdown-title"><span class="title">中文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wallpaper-engine-docs/zh/scene/scenescript/tutorial/audio.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/wallpaper-engine-docs/en/scene/scenescript/tutorial/audio.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wallpaper-engine-docs/scene/overview.html" class="nav-link">
  场景壁纸指南
</a></div><div class="nav-item"><a href="/wallpaper-engine-docs/web/overview.html" class="nav-link">
  Web壁纸指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中文" class="dropdown-title"><span class="title">中文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wallpaper-engine-docs/zh/scene/scenescript/tutorial/audio.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/wallpaper-engine-docs/en/scene/scenescript/tutorial/audio.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wallpaper-engine-docs/zh/scene/overview.html" class="sidebar-link">Wallpaper Engine编辑器</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>你的第一张壁纸</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>效果</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>组件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>用户属性</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>音频可视化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>粒子系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>时间轴动画</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>图片准备</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操控变形动画</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>光照与反射</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>视差效果</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>RGB设备</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>进阶: SceneScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3D模型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高阶: 着色器编程</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="使用-scenescript-处理音频数据"><a href="#使用-scenescript-处理音频数据" class="header-anchor">#</a> 使用 SceneScript 处理音频数据</h1> <p>使用 SceneScript，你可以访问当前用户设备上的音频频率。Wallpaper Engine收集音频频率的电平，并使其可供你进一步处理。在本教程中，我们将介绍获取音频数据的基础知识，我们将实现一个示例，在该示例中，我们将使元素的大小跟随用户正在播放的音乐节拍自动缩放。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>你可以在编辑器中快速访问此页面底部提供的最终解决方案，而无需从此页面复制粘贴任何代码。</p> <p>要快速将此示例添加到壁纸中，只需单击要随着音乐节拍调整大小的属性旁边的齿轮图标。选择<strong>绑定脚本</strong>，打开脚本编辑器。接下来，单击顶部的<strong>代码段</strong>，然后单击<strong>替换脚本</strong>，从脚本列表中选择<strong>音频因素</strong>（Audio Scale），然后单击<strong>确定</strong>。</p></div> <blockquote><p>译注：在编辑器中，Audio Scale被翻译为“音频因素”，容易令人费解，Scale是比例缩放的意思，Audio Scale要表达的意思应该是对象的大小跟随音频缩放，但为了避免有人找不到对应的选项，所以这里也将其译作“音频因素”。</p></blockquote> <h2 id="注册音频缓冲区"><a href="#注册音频缓冲区" class="header-anchor">#</a> 注册音频缓冲区</h2> <p>首先，需要通过从<a href="/wallpaper-engine-docs/scene/scenescript/reference/class/IEngine">全局变量engine</a>调用<code>registerAudioBuffers()</code>函数，让Wallpaper Engine初始化音频响应系统。该函数将返回一个<a href="/wallpaper-engine-docs/scene/scenescript/reference/class/AudioBuffers">AudioBuffers</a>对象，我们建议将其存储在脚本顶部的<code>audioBuffer</code>变量中，这样在加载壁纸时只需调用此函数一次：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> audioBuffer <span class="token operator">=</span> engine<span class="token punctuation">.</span><span class="token function">registerAudioBuffers</span><span class="token punctuation">(</span>engine<span class="token punctuation">.</span><span class="token constant">AUDIO_RESOLUTION_16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * @param {Vec3} value - for property 'scale'
 * @return {Vec3} - update current property value
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	
	<span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>registerAudioBuffers</code>的参数决定了你需要的频段数量，你应该始终选择最低限度的数值，以确保不会浪费系统性能或内存。有效的值是:</p> <ul><li><code>engine.AUDIO_RESOLUTION_16</code> - 16个频段</li> <li><code>engine.AUDIO_RESOLUTION_32</code> - 32个频段</li> <li><code>engine.AUDIO_RESOLUTION_64</code> - 64个频段</li></ul> <p>在我们的示例中，我们注册了 16 个频段，因为在我们的教程中我们只关心低音频率，不需要更精细的音频频段。</p> <h2 id="音频响应基本示例"><a href="#音频响应基本示例" class="header-anchor">#</a> 音频响应基本示例</h2> <p>让我们从一个非常基本的音频响应示例开始。我们有一个图像图层放置在壁纸的中心，我们希望让它随着音乐的节拍动态调整大小。为此，我们单击<strong>比例</strong>属性旁边的齿轮图标，然后选择<strong>绑定脚本</strong>。然后，我们就可以使用 SceneScript 修改比例了。</p> <p>我们需要用创建的<code>audioBuffer</code>获取电平以扩展上面的示例。<code>audioBuffer</code>对象可以让我们访问<code>audioBuffer.average</code>获取左右音频通道的平均电平。你也可以只访问<code>audioBuffer.left</code>获取左音频通道，只访问<code>audioBuffer.right</code>获取右音频通道。</p> <p>最后一步，我们需要选择音频频段。在Wallpaper Engine中，最常处理的是频段是低音频段，它们代表低音频率和音乐节拍。你可以通过访问第一个元素<code>audioBuffer.average[0]</code>来获取低音频段。这里的[0]代表低音频段，而15则代表高音频段。选择[0]是因为我们希望元素随着音乐的节拍动态的调整大小。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> audioBuffer <span class="token operator">=</span> engine<span class="token punctuation">.</span><span class="token function">registerAudioBuffers</span><span class="token punctuation">(</span>engine<span class="token punctuation">.</span><span class="token constant">AUDIO_RESOLUTION_16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * @param {Vec3} value - for property 'scale'
 * @return {Vec3} - update current property value
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	value<span class="token punctuation">.</span>x <span class="token operator">=</span> audioBuffer<span class="token punctuation">.</span>average<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	value<span class="token punctuation">.</span>y <span class="token operator">=</span> audioBuffer<span class="token punctuation">.</span>average<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	value<span class="token punctuation">.</span>z <span class="token operator">=</span> audioBuffer<span class="token punctuation">.</span>average<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">警告</p> <p>我们不建议在壁纸中使用此代码示例，请遵循页面的剩余内容，了解如何改进此实现。</p></div> <p>如果现在保存此脚本，并在播放音乐时点击<strong>运行预览</strong>，则图像图层将根据音乐的低音频率动态调整大小。观看以下视频以预览此代码示例：</p> <video width="100%" controls="controls"><source src="/wallpaper-engine-docs/videos/scenescript_basic_audio.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video> <h2 id="改进音频响应行为"><a href="#改进音频响应行为" class="header-anchor">#</a> 改进音频响应行为</h2> <p>我们之前的示例有几个问题，我们现在一一解决：</p> <ul><li>当没有播放音频时，比例为0时元素消失。</li> <li>当电平达到峰值电平时，该元素可能会变得非常大。</li> <li>动画看起来不是很流畅，并且跳来跳去不规则。</li></ul> <h2 id="强制最小默认大小"><a href="#强制最小默认大小" class="header-anchor">#</a> 强制最小默认大小</h2> <p>有多种方法可以实现最小大小，但我们在这里给出的示例是我们推荐的方法，因为它可以让你以后在编辑器中轻松修改默认大小。</p> <p>首先，在编辑器中将 <strong>比例</strong> 属性设置为所需的值。在我们的示例中，我们将图像图层比例的<strong>X</strong>、<strong>Y</strong>和<strong>Z</strong>配置为0.5，合理的选择是让其小于1，以确保在图像放大时图像质量不会受到影响。</p> <p>之后，我们通过引入<code>init</code>函数，<code>init</code>函数会在壁纸加载时调用一次，并将默认值赋值给<strong>比例</strong>。之后我们要在此默认值的基础上增加音频音量：</p> <div class="language-js extra-class"><pre class="language-js"><code>	value<span class="token punctuation">.</span>x <span class="token operator">=</span> defaultScale<span class="token punctuation">.</span>x <span class="token operator">+</span> audioBuffer<span class="token punctuation">.</span>average<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>如果没有音频正在播放，则比例将与默认值相同，并且所有比默认值更大的声音都将在此基础之上进行增加。完整的脚本如下所示，请注意我们是如何在<code>init</code>函数中存储默认值的：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> audioBuffer <span class="token operator">=</span> engine<span class="token punctuation">.</span><span class="token function">registerAudioBuffers</span><span class="token punctuation">(</span>engine<span class="token punctuation">.</span><span class="token constant">AUDIO_RESOLUTION_16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> defaultScale<span class="token punctuation">;</span>
<span class="token comment">/**
 * @param {Vec3} value - for property 'scale'
 * @return {Vec3} - update current property value
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	value<span class="token punctuation">.</span>x <span class="token operator">=</span> defaultScale<span class="token punctuation">.</span>x <span class="token operator">+</span> audioBuffer<span class="token punctuation">.</span>average<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	value<span class="token punctuation">.</span>y <span class="token operator">=</span> defaultScale<span class="token punctuation">.</span>y <span class="token operator">+</span> audioBuffer<span class="token punctuation">.</span>average<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	value<span class="token punctuation">.</span>z <span class="token operator">=</span> defaultScale<span class="token punctuation">.</span>z <span class="token operator">+</span> audioBuffer<span class="token punctuation">.</span>average<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @param {Vec3} value - for property 'scale'
 * @return {Vec3} - update current property value
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	defaultScale <span class="token operator">=</span> value<span class="token punctuation">;</span>
	<span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>你可以在 SceneScript 编辑器中快速添加<code>init</code>函数，方法是单击顶部的<strong>代码段</strong>，然后选择<strong>插入函数</strong>，选择<strong>init</strong>。</p></div> <h2 id="限制最大音频响应"><a href="#限制最大音频响应" class="header-anchor">#</a> 限制最大音频响应</h2> <p>现在，音频响应动画具有最小默认值，但仍可能变得非常大。需要注意的是，音频缓冲区通常不会大于<code>1.00</code>，但是，在某些情况下不排除会发生。因此，我们建议始终限制正在使用的值。你可以使用<code>Math.min()</code>函数轻松地将数字限制为不超过特定的值。在我们的例子中，我们通过<code>Math.min()</code>限定<code>audioBuffer.average[0]</code>的最大值为<code>1.00</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code>	value<span class="token punctuation">.</span>x <span class="token operator">=</span> defaultScale<span class="token punctuation">.</span>x <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>audioBuffer<span class="token punctuation">.</span>average<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	value<span class="token punctuation">.</span>y <span class="token operator">=</span> defaultScale<span class="token punctuation">.</span>y <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>audioBuffer<span class="token punctuation">.</span>average<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	value<span class="token punctuation">.</span>z <span class="token operator">=</span> defaultScale<span class="token punctuation">.</span>z <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>audioBuffer<span class="token punctuation">.</span>average<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果你需要对音频数据进行更复杂的处理，应使用未被限制的原始音频数据，仅在最后一步对其进行限制。在本页的下一节中，我们只在最后一步对音频数据使用<code>Math.min()</code>进行处理。</p> <h2 id="平滑音频响应"><a href="#平滑音频响应" class="header-anchor">#</a> 平滑音频响应</h2> <p>我们需要解决的最后一个问题是音频可视化不流畅。每次Wallpaper Engine渲染新帧时都会调用<code>update()</code>函数。这意味着，如果音频音量在短时间内发生剧烈变化，则值可能会在帧之间显着跳跃。请结合后面的代码来阅读下面的段落，它其实并不像看起来那么复杂！</p> <p>我们可以通过添加一些额外的代码来平滑过度音频响应。首先，我们需要声明一个新变量，用于存储多次<code>update()</code>调用时的音频响应，我们将此变量命名为<code>smoothAudioVolume</code>并在函数外部将其初始化为<code>0</code>，</p> <p>接下来，我们计算当前音频音量与先前音频音量（存储在<code>smoothAudioVolume</code>中）之间的差异，以查看自计算最后一帧以来电平发生了多少变化。我们将此结果存储在名为<code>volumeDifference</code>的变量中。</p> <p>我们在下一步中使用<code>volumeDifference</code>乘以一个平滑乘数，在我们的示例中，我们将平滑乘数放在代码顶部的常量<code>SMOOTHING_RATE</code>中，其值为15，你可以更改此数字以增加或减少平滑级别。</p> <p>我们还需要将其乘以<code>engine.frametime</code>，这很重要，因为我们需要用每帧的时间来调整不同 FPS 设置中的动画速度，否则在不同的FPS设置下，速度会有所不同。请记住，<code>update()</code>函数每帧调用一次，这意味着，如果你的 FPS 限制为 60，则该函数将每秒被调用 60 次。如果你的 FPS 限制为 30 ，则只会被调用 30 次。</p> <p>最后，我们将计算结果赋值给<code>smoothAudioVolume</code>变量。在我们的实际上代码中，只有这一行：</p> <div class="language-js extra-class"><pre class="language-js"><code>	smoothAudioVolume <span class="token operator">+=</span> volumeDifference <span class="token operator">*</span> <span class="token constant">SMOOTHING_RATE</span> <span class="token operator">*</span> engine<span class="token punctuation">.</span>frametime<span class="token punctuation">;</span>
</code></pre></div><p>就像前面的部分一样，我们使用<code>Math.min()</code>将电平的峰值限制为<code>1.00</code>。</p> <p>然后，我们只需在<code>update()</code>函数的末尾返回<code>smoothAudioVolume</code>。之前我们修改了<code>value</code>的值并专门设置<code>了value.x</code>和<code>value.y</code>，但是如果你清楚的知道三者是同一个值，则可以返回一个数字，Wallpaper Engine 会自动将该数字应用于三个值。这一点同样适用于<code>Vec2</code>属性。</p> <p>最终代码现在如下所示：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> audioBuffer <span class="token operator">=</span> engine<span class="token punctuation">.</span><span class="token function">registerAudioBuffers</span><span class="token punctuation">(</span>engine<span class="token punctuation">.</span><span class="token constant">AUDIO_RESOLUTION_16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">SMOOTHING_RATE</span> <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> defaultScale<span class="token punctuation">;</span>
<span class="token keyword">let</span> smoothAudioVolume <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * @param {Vec3} value - for property 'scale'
 * @return {Vec3} - update current property value
 */</span>
 <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Calculate difference in audio volume between last frame and now</span>
	<span class="token keyword">let</span> volumeDifference <span class="token operator">=</span> audioBuffer<span class="token punctuation">.</span>average<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> smoothAudioVolume<span class="token punctuation">;</span>
	<span class="token comment">// Add difference between previous and current frame, include frametime to account for FPS</span>
	smoothAudioVolume <span class="token operator">+=</span> volumeDifference <span class="token operator">*</span> <span class="token constant">SMOOTHING_RATE</span> <span class="token operator">*</span> engine<span class="token punctuation">.</span>frametime<span class="token punctuation">;</span>
	<span class="token comment">// Limit value to 1.00 to ignore excessive audio levels</span>
	smoothAudioVolume <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>smoothAudioVolume<span class="token punctuation">,</span> <span class="token number">1.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// Wallpaper Engine will create a Vec3 object for us if we just return a number here</span>
	<span class="token keyword">return</span> smoothAudioVolume<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @param {Vec3} value - for property 'scale'
 * @return {Vec3} - update current property value
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	defaultScale <span class="token operator">=</span> value<span class="token punctuation">;</span>
	<span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你可以在以下视频中看到此操作的结果。动画现在变得更加流畅，即使没有播放音频，我们的对象仍然可见，并且永远不会变得过大：</p> <video width="100%" controls="controls"><source src="/wallpaper-engine-docs/videos/scenescript_smoothened_audio.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/wallpaper-engine-docs/zh/scene/scenescript/tutorials.html" class="prev">
        SceneScript教程
      </a></span> <!----></p></div> <footer><hr> <ul class="footer-list"><li></li> <li class="imprint"><a href="https://wallpaperengine.io/imprint.html">Imprint</a></li></ul></footer></main></div><div class="global-ui"><!----></div></div>
    <script src="/wallpaper-engine-docs/assets/js/app.a9f24f61.js" defer></script><script src="/wallpaper-engine-docs/assets/js/9.94e6aa3a.js" defer></script><script src="/wallpaper-engine-docs/assets/js/1.53c8499c.js" defer></script><script src="/wallpaper-engine-docs/assets/js/325.1db59ae4.js" defer></script>
  </body>
</html>
