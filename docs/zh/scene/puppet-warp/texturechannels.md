# 纹理通道动画

操控变形还能让你利用纹理通道在两个或多个不同的纹理之间混合，成为动画的一部分。在本教程中，我们将展示如何用这种方法实现简单的眨眼动画。

::: warning 请注意
在尝试本教程之前，你应该已经阅读并理解了[操控变形动画介绍](/wallpaper-engine-docs/scene/puppet-warp/introduction)，因为本指南要求你设置好基本的操控变形动画。

本指南展示的是一个[角色表](/scene/puppet-warp/charactersheet)的例子, 但角色表并非实现此功能所必需的。
:::

<video width="100%" controls autoplay loop>
  <source :src="$withBase('/videos/puppet_warp_eye_blinking.mp4')" type="video/mp4">
  Your browser does not support the video tag.
</video>

## 创建纹理通道

要添加纹理通道，请打开图像图层的操控变形菜单。在操控变形界面下方，你可以在属性的 **可选** 部分找到一个 **纹理通道** 按钮。单击 **纹理通道** 按钮打开纹理通道配置。你将从一个基础的纹理通道开始，该通道是操控变形图像图层的基础图像。单击 **添加通道** 按钮导入新图像作为附加通道。

::: warning 重要的提示
每个通道必须具有与主操控变形图像具有相同的分辨率，因为 Wallpaper Engine 会对像素查找差异。请确保在准备其他纹理通道时始终维持相同的分辨率。
:::

在我们的示例中，我们有两个版本的图像，一个是睁开眼睛的骑士的角色表，第二个是闭着眼睛的同一个骑士。我们将闭眼版本导入为附加通道，Wallpaper Engine 将自动标记原始图像与导入图像不同的所有区域，便于你查看图像的哪些部分在图层之间发生了变化：

<video width="100%" controls loop>
  <source :src="$withBase('/videos/puppet_warp_texture_channel_setup.mp4')" type="video/mp4">
  Your browser does not support the video tag.
</video>

### 写入不透明度

纹理通道的 **不透明度写入** 选项主要与添加或删除图像的透明区域相关，也就是更改图像的形状或轮廓。在本例中，我们只改变了眼睛，没有改变角色之外的任何透明区域。因此在本例中是不需要的，我们关闭了 **不透明度写入** 选项。如果你有一些更复杂的对重叠区域的更改，则也应关闭 **不透明度写入**。相反，如果你希望能更改或替换图像的轮廓，则应打开此选项。如果对此项有疑问，请尝试切换该选项，看看模型的行为是否得到了你预期的结果。

### 创建额外的通道

你可以创建多个纹理通道来完成更复杂的纹理动画，并且可以配置所有通道的绘制顺序。但是请记住，此功能并不推荐用来控制像 GIF 那样有大量帧的动画。

::: warning 极限
根据模型纹理的分辨率以及组合更改所有纹理通道，最终可能会达到纹理通道数据的极限。如果在编辑纹理通道时遇到错误，则需要删除通道或更改通道，以便其受影响的区域变小。
:::

## 纹理通道动画

设置纹理通道后，你可以继续查看操控变形的 **动画** 部分。在我们的例子中，我们为纹理通道创建了一个新的 4 秒循环动画，但你也可以将纹理通道动画合并到任何现有的动画中。

::: warning 重要
只有在未选中骨骼时才能看到纹理通道。如果在 **动画** 视图中选择了任何骨骼，可以再次单击所选骨骼取消选中。
:::

如果未选中任何骨骼，你将在动画部分的左侧看到各个纹理层的选项。在本例中，我们将纹理层命名为 **knight eyes closed**（骑士眼睛闭着），以方便识别。在右侧，可以为每个纹理通道的不透明度设置一个介于 `0.00` 到 `1.00` 之间的值。通过在动画中增加和减少该值，可以在这些不同通道之间转换，以实现操控变形的纹理通道动画。

在本例中，我们在两个间隔很短的时间内将纹理通道的不透明度从`0.00`增加到`1.00`，并在剩余的动画中维持值为`0.00`。其结果就是，眼睛会快速眨眼，然后保持睁开状态数秒钟。你可以在以下视频中看到此示例：

<video width="100%" controls loop>
  <source :src="$withBase('/videos/puppet_warp_texture_channel_animation.mp4')" type="video/mp4">
  Your browser does not support the video tag.
</video>
