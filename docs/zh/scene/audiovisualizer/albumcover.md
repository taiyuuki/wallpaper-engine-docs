# 集成专辑封面

Wallpaper Engine可以让你将Windows媒体数据（如专辑封面，歌曲标题，当前播放时间等）集成到壁纸中。本指南将主要说明如何在壁纸中集成专辑封面。你可以在以下指南中了解有关如何获取的详细信息：

* [媒体信息集成](/wallpaper-engine-docs/scene/audiovisualizer/mediainformation)

<video width="100%" controls autoplay loop>
  <source :src="$withBase('/videos/album_simple_showcase.mp4')" type="video/mp4">
  Your browser does not support the video tag.
</video>

*本教程中介绍的集成专辑封面简单示例。请注意，Wallpaper Engine依赖于Windows媒体层的专辑封面，如上面的视频内容所示。*

## 专辑封面分辨率

我们建议将专辑封面的分辨率限制为 256x256 像素或更低。专辑封面的质量和分辨率通常取决于相应的媒体播放器和音频文件。但是，我们建议使用大小介于 100x100 像素和 256x256 像素之间的正方形分辨率。

## 创建占位符

壁纸的用户不会始终都在播放媒体内容，因此很重要的一点是，没有音频播放处于活动状态时，确保专辑封面的放置空间具有某种占位符。

如果没有音频正在播放时，你只希望封面位置是一个纯色的区域（或完全隐藏专辑封面），则应使用**纯色占位符**图层，因为这样能具有最佳的性能。要添加**纯色占位符**，请单击左侧的**添加组件**，然后在列表底部选择**纯色占位符**，然后按照专辑封面设置首选大小和默认颜色。

如果要改为显示的占位符图像，只需将该图像导入编辑器然后调整它，而无需使用**纯色占位符**。在我们的示例中，我们将使用 256x256 像素的占位符图像来展示此功能。最重要的是，你的图像是方形的，并且理论上应当和你以后想要用于专辑封面的分辨率一致。

## 分配专辑封面

创建占位符后，你可以继续功能的实现，主要是要在播放媒体时显示专辑封面。为此，请选择占位符图层，然后单击属性列表底部右侧的**高级纹理设置**。

单击**反照率**纹理旁边的齿轮图标，然后选择**绑定专辑封面**。你将看到两个选项**：当前专辑封面**和**上一张专辑封面**。本例中，我们使用**当前专辑封面**，我们将在下一节中向你展示如何使用**上一张专辑封面**。确认之后，单击编辑器上的**运行预览**按钮。这样一来，只要你使用Windows媒体功能集成的播放器播放音乐，你就会在壁纸中看到专辑封面。

## 高级：在专辑封面之间创建过渡

在本节中，我们需要利用**混合**效果，使用[时间轴动画]((/wallpaper-engine-docs/scene/timeline/introduction))在两个专辑封面之间平滑过渡。它更高级一些，但如果你逐步按照本节进行操作，你应该能够自己实现这一点。

首先，选择你之前创建的专辑封面图层。单击右侧效果列表中的**添加**按钮，然后选择[混合](/wallpaper-engine-docs/scene/effects/effect/blend)效果或[混合渐变](/wallpaper-engine-docs/scene/effects/effect/blendgradient)效果。

接下来，选择你创建的混合效果，然后单击**混合纹理**纹理旁边的齿轮图标。和之前一样，选择**绑定专辑封面**，在弹出窗口中，选择**上一张专辑封面**。但你不会立即看到任何变动，混合纹理始终是之前的专辑封面。

> 译注：这里原文说的是单击反照率（Albedo Texture）纹理旁的齿轮图标，但实际在编辑器里应该是对应混合纹理。

### 创建时间轴动画

你已经配置了**反照率**纹理，你需要创建一个简短的时间轴动画，以便你在两个专辑封面之间平滑过渡。

选择**混合效果**并在其属性的底部找到**混合量**。在混合量旁边，单击齿轮图标并选择**绑定时间轴动画**。你现在将看到动画选项，你需要在此处进行一些更改：

* **模式**： 将此选项设置为**单张**，因为我们只希望在需要时播放一次过渡。
* **秒**： 这是专辑封面之间过渡时间，根据自己的喜好进行设置，例如2秒。
* **帧率**： 你可以将这个值维持在`60`。
* **开始播放时暂停**： 确保**勾选**这个选项。

完成此操作后，你将在底部看到针对**混合量**的时间轴动画。抓住时间轴选择器并将其一直移动到最后一帧。然后，将混合量向减少的方向拖动到左侧。这样，你应该会在时间轴动画中看到一条平滑的曲线，请参阅以下视频示例：

<video width="100%" controls>
  <source :src="$withBase('/videos/album_blend.mp4')" type="video/mp4">
  Your browser does not support the video tag.
</video>

### 使用SceneScript启用动画

使专辑封面过渡的最后一步是使用每次Wallpaper Engine收到新专辑封面时触发的`mediaThumbnailChanged`事件。返回到之前创建的**混合**效果，然后再次单击效果的**混合量**属性旁边的齿轮图标。这一次，选择**绑定脚本**。你将看到自动生成的默认脚本，将脚本的内容替换为以下代码：

```js
'use strict';

/**
 * @param {MediaThumbnailEvent} event
 */
export function mediaThumbnailChanged(event) {
	thisObject.getAnimation().play();
}
```

当收到新的专辑封面时，这将开始播放你刚刚创建的时间轴动画。动画将在旧专辑封面到新专辑封面之间平滑过渡。

## 其他媒体功能

本指南提供了如何使用专辑封面功能的基本示例。我们建议你应当考虑可能不播放音乐的用户，方法是隐藏这些元素并确保即使没有播放音乐也能正常工作。有关更高级的教程，请参阅

> 译注：原文就是这样戛然而止，并没有提供参阅的链接，可能正如上一页所说，这部分内容还在建设当中。
