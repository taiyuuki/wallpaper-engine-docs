(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{457:function(t,a,e){"use strict";e.r(a);var n=e(26),s=Object(n.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"interactive-puppet-warps"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#interactive-puppet-warps"}},[t._v("#")]),t._v(" Interactive Puppet Warps")]),t._v(" "),e("p",[t._v("Puppet Warping in combination with "),e("em",[t._v("SceneScript")]),t._v(" can also be used to create interactive wallpaper elements. In this tutorial, we will discuss how to allow users to grab and drag around individual bones.")]),t._v(" "),e("p",[t._v("You should have read and understood the "),e("a",{attrs:{href:"/wallpaper-engine-docs/scene/puppet-warp/introduction"}},[t._v("Puppet Warp Introduction Guide")]),t._v(" before attempting this tutorial.")]),t._v(" "),e("h2",{attrs:{id:"interactive-bones"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#interactive-bones"}},[t._v("#")]),t._v(" Interactive bones")]),t._v(" "),e("p",[t._v("In this guide, we will go into how to create an interactive wallpaper element that users can drag and release.")]),t._v(" "),e("video",{attrs:{width:"100%",controls:"",loop:""}},[e("source",{attrs:{src:t.$withBase("/videos/puppet_warp_interactive.mp4"),type:"video/mp4"}}),t._v("\n  Your browser does not support the video tag.\n")]),t._v(" "),e("p",[t._v("If you would like to follow along or see the full sample project, you can download it here:")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"/samples/jelly_simple.zip"}},[t._v("Click here to download the simple jelly project.")])])]),t._v(" "),e("h3",{attrs:{id:"setting-up-the-puppet-warp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-the-puppet-warp"}},[t._v("#")]),t._v(" Setting up the puppet warp.")]),t._v(" "),e("p",[t._v("In order to achieve this, we need to utilize puppet warping in combination with SceneScript. We start by creating a puppet warp on our "),e("em",[t._v("jelly")]),t._v(" object. The geometry does not require any special attention. For the bone setup, our basic example only includes two bones: One static root bone which represents the outer areas of our jelly object and another bone in the center of the jelly object that has been configured to use "),e("strong",[t._v("Spring simulation")]),t._v(" in the "),e("strong",[t._v("Bone Constraints")]),t._v(":")]),t._v(" "),e("p",[e("img",{attrs:{src:"/wallpaper-engine-docs/img/puppet-warp/puppet_warp_interactive_bones.png",alt:"Puppet Warp - Interactive Bone Setup"}})]),t._v(" "),e("p",[t._v("For the bone constraints of the center bone, we have enabled "),e("strong",[t._v("Spring simulation")]),t._v(" and then "),e("strong",[t._v("Physics translation")]),t._v(" and left everything else in its default state. This means that we are able to move the bone around (this is what enabling "),e("strong",[t._v("physics translation")]),t._v(" does) and since it's a "),e("strong",[t._v("spring simulation")]),t._v(", it will automatically return to its original position when the mouse cursor is released.")]),t._v(" "),e("p",[t._v("Also, it's important to set a "),e("strong",[t._v("Name")]),t._v(" for the bone that we can later reference in our code. In our example, we will set the name "),e("strong",[t._v("MouseBone")]),t._v(" to the bone when selecting it in the editor.")]),t._v(" "),e("p",[t._v("For the bone weights, the center bone gets a small area in the middle of the object. In our case, the green area represents the area that will be dragged by the mouse cursor, while the red area represents the immovable area that belongs to the root bone:")]),t._v(" "),e("p",[e("img",{attrs:{src:"/wallpaper-engine-docs/img/puppet-warp/puppet_warp_interactive_weights.png",alt:"Puppet Warp - Interactive Weight Setup"}})]),t._v(" "),e("p",[t._v("We do not need to create any animations for this example, as the mouse interactions are completely separate from this.")]),t._v(" "),e("h3",{attrs:{id:"scenescript-code-for-the-mouse-drag"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scenescript-code-for-the-mouse-drag"}},[t._v("#")]),t._v(" SceneScript code for the mouse drag")]),t._v(" "),e("p",[t._v("Next up, we need to assign a "),e("em",[t._v("SceneScript")]),t._v(" code snippet to the jelly image layer. Select the layer and click on the cogwheel icon in the upper right corner, next to the visibility and lock icon. You can copy-paste the code from below and inspect the code comments for some additional details:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Set the maximum distance that the bone can be dragged away ")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DRAG_MAX_DISTANCE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Set the "Name" of the bone that can be dragged as defined in puppet warp setup')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MOUSE_BONE_NAME")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MouseBone'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" activeDragBone"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" isDragging "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dragDelta"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dragStart"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param {Boolean} value - for property 'visible'\n * @return {Boolean} - update current property value\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isDragging"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Use the mouse cursor position to calculate the drag distance")]),t._v("\n\t\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" drag "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" input"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cursorWorldPosition"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("subtract")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dragStart"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dragDist "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" drag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tdrag "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" drag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("divide")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dragDist"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Limit the distance to the max distance that was configured in the DRAG_MAX_DISTANCE constant at the top")]),t._v("\n\t\tdrag "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dragStart"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("drag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("multiply")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("min")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DRAG_MAX_DISTANCE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dragDist"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Move the bone to the newly calculated drag distance")]),t._v("\n\t\tthisLayer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setBoneTransform")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("activeDragBone"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thisLayer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBoneTransform")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("activeDragBone"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("translation")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("drag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dragDelta"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param {CursorEvent} event\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cursorDown")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bonePos "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" thisLayer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBoneTransform")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("translation")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" delta "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bonePos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("copy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("subtract")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cursorWorldPosition"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" len "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" delta"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Update the drag position if it's not further away than the maximum distance")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("len "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DRAG_MAX_DISTANCE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tdragStart "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bonePos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tdragDelta "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" delta"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tisDragging "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param {CursorEvent} event\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cursorUp")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Release the drag animation in the next update() call")]),t._v("\n\tisDragging "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Get bone for mouse movement\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Get the numeric index of the bone that can be dragged and store it for later use")]),t._v("\n\tactiveDragBone "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" thisLayer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBoneIndex")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MOUSE_BONE_NAME")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("First, the code loads the bone that can be dragged by its name and stores it in a variable. You can change value of "),e("code",[t._v("MOUSE_BONE_NAME")]),t._v(" at the top of the code if you have given your bone a different name during the puppet warp setup:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("thisLayer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBoneIndex")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MOUSE_BONE_NAME")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("The main movement of the bone occurs in the "),e("code",[t._v("update()")]),t._v(" function. The bone is constantly moved towards mouse cursor position, specifically this line in the code handles all of the movement:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("thisLayer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setBoneTransform")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("activeDragBone"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thisLayer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBoneTransform")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("activeDragBone"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("translation")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("drag"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dragDelta"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("By using "),e("code",[t._v("thisLayer.setBoneTransform")]),t._v(", we can alter any bone on the current layer by accessing it through its index. The second parameter "),e("code",[t._v("thisLayer.getBoneTransform(activeDragBone).translation(drag.add(dragDelta))")]),t._v(" may look a bit confusing at first glance, but it's really not that complex. Basically, it just means we take the position of the bone and then move it according to the mouse cursor position on the wallpaper with the "),e("code",[t._v(".translation()")]),t._v(" function.")]),t._v(" "),e("p",[t._v("When the mouse cursor is released, the bone will return to its original position, since the bone has been configured to use "),e("strong",[t._v("Spring simulation")]),t._v(" in the puppet warp. This means the bone will return to its original position automatically and without the need for extra code.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("You can use SceneScript to override all puppet warp animations reliably. Wallpaper Engine will execute all animations on all layers before it will execute any scripts on a frame before displaying a layer.")])]),t._v(" "),e("p",[t._v("Once you have applied this code snippet to the jelly layer, you can click on "),e("strong",[t._v("Run Preview")]),t._v(" at the top or apply the wallpaper and it should already be functional like in the preview video above. Keep in mind that this will only work for one")]),t._v(" "),e("h2",{attrs:{id:"advanced-interactions-puppet-warp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#advanced-interactions-puppet-warp"}},[t._v("#")]),t._v(" Advanced interactions puppet warp")]),t._v(" "),e("p",[t._v("We have also created a much more complex example of this in a separate project. In this case, the jelly has a large number of bones which can all be dragged around. Additionally, it includes a timeline animation which is triggered by SceneScript whenever the mouse is released to simulate the physical impact of the bone returning to its original state (see the impact jiggling in the video below). The jelly texture has also been made into a sprite sheet with multiple facial expressions which are switched around when the dragging animation starts. The example also includes sounds and is overall a little more complex, but if you would like to see how we achieved this, you can check out the sample project at the following link:")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"/samples/jelly_advanced.zip"}},[t._v("Click here to download the advanced jelly project.")])])]),t._v(" "),e("p",[t._v("You can see the advanced example in action in the following video:")]),t._v(" "),e("video",{attrs:{width:"100%",controls:"",loop:""}},[e("source",{attrs:{src:t.$withBase("/videos/puppet_warp_interactive_advanced.mp4"),type:"video/mp4"}}),t._v("\n  Your browser does not support the video tag.\n")])])}),[],!1,null,null,null);a.default=s.exports}}]);