(window.webpackJsonp=window.webpackJsonp||[]).push([[326],{688:function(t,s,e){"use strict";e.r(s);var a=e(26),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"scenescript基础知识"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scenescript基础知识"}},[t._v("#")]),t._v(" SceneScript基础知识")]),t._v(" "),e("p",[t._v("对于几乎所有的Wallpaper Engine组件和效果，其每个属性都可以使用SceneScript进行控制。在本指南中，我们将展示SceneScript的一些基本功能，让你了解如何开始使用SceneScript。")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#如何添加scenescript"}},[t._v("如何添加SceneScript")])]),e("li",[e("a",{attrs:{href:"#scenescript的update-函数"}},[t._v("SceneScript的update()函数")]),e("ul",[e("li",[e("a",{attrs:{href:"#使用scenescript修改value的值"}},[t._v("使用SceneScript修改value的值")])]),e("li",[e("a",{attrs:{href:"#执行scenescript"}},[t._v("执行SceneScript")])])])]),e("li",[e("a",{attrs:{href:"#scenescript动态内容"}},[t._v("SceneScript动态内容")])]),e("li",[e("a",{attrs:{href:"#属性类型"}},[t._v("属性类型")])]),e("li",[e("a",{attrs:{href:"#使用scenescript移动、转动和缩放对象"}},[t._v("使用SceneScript移动、转动和缩放对象")])]),e("li",[e("a",{attrs:{href:"#调试scenescript"}},[t._v("调试SceneScript")])]),e("li",[e("a",{attrs:{href:"#更多关于scenescript"}},[t._v("更多关于SceneScript")])])])]),e("p"),t._v(" "),e("p",[t._v("在本指南中，我们将使用简单的"),e("strong",[t._v("文本")]),t._v("图层作为示例。如果你想跟着操作，只需在壁纸中添加"),e("strong",[t._v("文本")]),t._v("图层即可。")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("关于本指南")]),t._v(" "),e("p",[t._v("以下教程显得非常冗长，因为我们会尝试逐步介绍。它同时照顾了绝对的初学者和高级程序员，但如果你是经验丰富的程序员，只需稍微浏览一下，然后阅读更高级的"),e("a",{attrs:{href:"/wallpaper-engine-docs/scene/scenescript/tutorials"}},[t._v("SceneScript教程")]),t._v("或"),e("a",{attrs:{href:"/wallpaper-engine-docs/scene/scenescript/reference"}},[t._v("SceneScrip语言参考")]),t._v("就足够了。")]),t._v(" "),e("p",[t._v("我们邀请初学者与本指南一起操作并进行一些实验。如果你迷路了，请务必观看我们在每个部分下提供的视频。")])]),t._v(" "),e("h2",{attrs:{id:"如何添加scenescript"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何添加scenescript"}},[t._v("#")]),t._v(" 如何添加SceneScript")]),t._v(" "),e("p",[t._v("在编辑器中选择任何元素时，你都可以在右侧找到对应的属性。可以看到，所有属性旁边都有一个齿轮图标，例如以下截图中的红色箭头指向的位置：")]),t._v(" "),e("p",[e("img",{attrs:{src:"/wallpaper-engine-docs/img/scenescript/scenescript_ui.png",alt:"SceneScript in the User Interface"}})]),t._v(" "),e("p",[t._v("当你在属性旁边看到齿轮图标时，这意味着你可以通过单击该图标并选择"),e("strong",[t._v("绑定脚本")]),t._v("将"),e("strong",[t._v("SceneScript代码绑定")]),t._v("到该属性。在我们的示例中，我们将为"),e("strong",[t._v("文本")]),t._v("图层的"),e("strong",[t._v("文本")]),t._v("属性执行此操作。")]),t._v(" "),e("h2",{attrs:{id:"scenescript的update-函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scenescript的update-函数"}},[t._v("#")]),t._v(" SceneScript的update()函数")]),t._v(" "),e("p",[t._v("单击"),e("strong",[t._v("绑定脚本")]),t._v("后，你将看到SceneScript编辑器和以下自动生成的代码片段：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param {String} value - for property 'text'\n * @return {String} - update current property value\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[e("code",[t._v("update")]),t._v("函数是大多数情况下SceneScript行为的核心。每次Wallpaper Engine渲染新的一帧时，都会执行它。这意味着，例如，如果用户将 FPS 限制为 30，则该函数每秒执行 30 次。在上面的代码片段中，你可以看到什么都没有发生：函数传递的参数"),e("code",[t._v("value")]),t._v("，在不修改它的情况下直接返回。")]),t._v(" "),e("p",[e("code",[t._v("update")]),t._v("函数的行为可以分为三个步骤：")]),t._v(" "),e("ol",[e("li",[t._v("初始"),e("code",[t._v("value")]),t._v("参数是属性的当前值。")]),t._v(" "),e("li",[t._v("使用自定义的逻辑对"),e("code",[t._v("value")]),t._v("进行修改。")]),t._v(" "),e("li",[t._v("将新的"),e("code",[t._v("value")]),t._v("返回。")])]),t._v(" "),e("p",[e("code",[t._v("value")]),t._v("的类型取决于属性类型，在本例中，它是一个"),e("code",[t._v("String")]),t._v("，因为我们处理的是"),e("strong",[t._v("文本")]),t._v("属性。")]),t._v(" "),e("h3",{attrs:{id:"使用scenescript修改value的值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用scenescript修改value的值"}},[t._v("#")]),t._v(" 使用SceneScript修改value的值")]),t._v(" "),e("p",[t._v("现在我们开始修改"),e("code",[t._v("value")]),t._v("。我们将从一个非常简单的示例开始，并通过SceneScript将"),e("strong",[t._v("文本")]),t._v("图层的文本"),e("code",[t._v("value")]),t._v("更改为"),e("code",[t._v("123!!")]),t._v("：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param {String} value - for property 'text'\n * @return {String} - update current property value\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tvalue "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123!!"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("添加新代码后，按右上角的"),e("strong",[t._v("确定")]),t._v("进行确认，这将关闭编辑器。")]),t._v(" "),e("h3",{attrs:{id:"执行scenescript"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行scenescript"}},[t._v("#")]),t._v(" 执行SceneScript")]),t._v(" "),e("p",[t._v("你不会马上在编辑器中看到任何变动。因为编辑器不会直接执行SceneScript代码。你可以通过顶部的"),e("strong",[t._v("运行预览")]),t._v("按钮来执行SceneScript代码。然后，你就可以看到文本图层的值被更改为"),e("code",[t._v("123!!")]),t._v("。")]),t._v(" "),e("p",[t._v("你可以在以下视频中查看：")]),t._v(" "),e("video",{attrs:{width:"100%",controls:""}},[e("source",{attrs:{src:t.$withBase("/videos/scenescript_basic.mp4"),type:"video/mp4"}}),t._v("\n  Your browser does not support the video tag.\n")]),t._v(" "),e("h2",{attrs:{id:"scenescript动态内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scenescript动态内容"}},[t._v("#")]),t._v(" SceneScript动态内容")]),t._v(" "),e("p",[t._v("我们前面展示的示例非常基础，使用SceneScript进行静态文本的更改实际上没有意义，因为我们可以直接在编辑器中设置。现在让我们介绍一些动态文本内容。")]),t._v(" "),e("p",[t._v("正如一开始所说，SceneScript像许多其他语言一样基于"),e("em",[t._v("ECMAScript")]),t._v("，尤其是"),e("em",[t._v("JavaScript")]),t._v("。这意味着，我们可以通过"),e("code",[t._v("Date")]),t._v("访问当前计算机的日期和时间。这可以让我们动态更改文本层的文本，例如，像在 JavaScript 中一样构建时钟。")]),t._v(" "),e("p",[t._v("为了本教程的简单易懂，我们不会构建一个完整的时钟，而是只显示时钟的秒数。为了实现这一点，我们首先通过编写"),e("code",[t._v("let date = new Date();")]),t._v("获取日期对象，"),e("code",[t._v("Date")]),t._v("对象含有与日期和时间相关的各种函数，例如"),e("code",[t._v("date.getSeconds();")]),t._v("，我们只需通过获取当前秒数并立即将其作为新的值返回，甚至不需要去覆盖"),e("code",[t._v("value")]),t._v("的值：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param {String} value - for property 'text'\n * @return {String} - update current property value\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" date "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" date"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSeconds")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("执行SceneScript代码时，我们的文本层将表示设备时钟的当前秒数。请参阅以下示例视频：")]),t._v(" "),e("video",{attrs:{width:"100%",controls:""}},[e("source",{attrs:{src:t.$withBase("/videos/scenescript_seconds.mp4"),type:"video/mp4"}}),t._v("\n  Your browser does not support the video tag.\n")]),t._v(" "),e("h2",{attrs:{id:"属性类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#属性类型"}},[t._v("#")]),t._v(" 属性类型")]),t._v(" "),e("p",[t._v("在前面的示例中，我们使用了"),e("strong",[t._v("文本")]),t._v("属性，该属性的类型是"),e("code",[t._v("String")]),t._v("，但其他属性，例如"),e("strong",[t._v("起点")]),t._v("、"),e("strong",[t._v("角度")]),t._v("和"),e("strong",[t._v("比例")]),t._v("呢？")]),t._v(" "),e("p",[e("img",{attrs:{src:"/wallpaper-engine-docs/img/scenescript/vec3.png",alt:"Vec3 Samples"}})]),t._v(" "),e("p",[t._v("这三个属性由"),e("code",[t._v("x")]),t._v("，"),e("code",[t._v("y")]),t._v("，"),e("code",[t._v("z")]),t._v("组成。为了处理这些属性，Wallpaper Engine提供了一个名为"),e("code",[t._v("Vec3")]),t._v("的新类("),e("code",[t._v("class")]),t._v(")，每当将脚本绑定到这些属性时，都会使用该类。该类包含"),e("code",[t._v("x")]),t._v("，"),e("code",[t._v("y")]),t._v("，"),e("code",[t._v("z")]),t._v("三个值，并可以让你在每次"),e("code",[t._v("update")]),t._v("函数中访问和修改它们。")]),t._v(" "),e("p",[t._v("让我们在一个简单的示例中探讨这一点。我们单击"),e("strong",[t._v("起点")]),t._v("属性旁边的齿轮图标，然后和之前一样选择"),e("strong",[t._v("绑定脚本")]),t._v("。现在，我们可以通过覆盖"),e("code",[t._v("y")]),t._v("来修改元素的位置。在下面的示例中，我们只覆盖"),e("code",[t._v("y")]),t._v("的值，保留其他值不变：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param {Vec3} value - for property 'origin'\n * @return {Vec3} - update current property value\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tvalue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("同时需要注意的是，Wallpaper Engine在"),e("code",[t._v("update")]),t._v("函数上面的注释中自动填充类型提示："),e("code",[t._v("@param {Vec3}")]),t._v("，这样你就始终可以知道你收到的类型以及将返回的类型是什么。")]),t._v(" "),e("p",[t._v("如果我们现在保存此代码，然后再次使用"),e("strong",[t._v("运行预览")]),t._v("，你将看到目标对象移动到了在SceneScript代码中定义的新位置。在以下视频中查看此过程：")]),t._v(" "),e("video",{attrs:{width:"100%",controls:""}},[e("source",{attrs:{src:t.$withBase("/videos/scenescript_vec3_intro.mp4"),type:"video/mp4"}}),t._v("\n  Your browser does not support the video tag.\n")]),t._v(" "),e("h2",{attrs:{id:"使用scenescript移动、转动和缩放对象"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用scenescript移动、转动和缩放对象"}},[t._v("#")]),t._v(" 使用SceneScript移动、转动和缩放对象")]),t._v(" "),e("p",[t._v("让我们在前面的示例中添加一个更动态的移动对象的方式，而不是仅仅将其放置在场景中的随机位置。有多种方法可以解决这个问题，我们在这里展示一个例子。")]),t._v(" "),e("p",[t._v("我们将首先从一个不太理想的方案开始，然后在下一步中修正为更好的方案。解决此问题的一种方案是从任意值开始，例如"),e("code",[t._v("500")]),t._v("，然后不断递增。Wallpaper Engine提供了一个全局对象"),e("code",[t._v("engine")]),t._v("，你可以在代码的任意位置访问该对象。它有一个"),e("code",[t._v("engine.runtime")]),t._v("属性，用于保存壁纸的当前运行时间。")]),t._v(" "),e("p",[t._v("在我们的示例中，我们希望向上移动对象。我们给"),e("code",[t._v("value.y")]),t._v("设置一个起始值，然后让它增加"),e("code",[t._v("engine.runtime")]),t._v("乘以100，这样我们的对象在壁纸运行时间的每一秒都会移动100像素：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param {Vec3} value - for property 'origin'\n * @return {Vec3} - update current property value\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tvalue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("engine"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runtime "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("观看以下视频查看输出结果：")]),t._v(" "),e("video",{attrs:{width:"100%",controls:""}},[e("source",{attrs:{src:t.$withBase("/videos/scenescript_vec3_basic_movement.mp4"),type:"video/mp4"}}),t._v("\n  Your browser does not support the video tag.\n")]),t._v(" "),e("p",[t._v("如你所见，我们的对象现在将无限向上浮动，这并不是很好。另一个需要注意的重要事项是，如果经过足够长的时间，"),e("code",[t._v("engine.runtime")]),t._v("的值最终将变回0，因此从长远来考虑，这也不是一个很可靠的方案。")]),t._v(" "),e("p",[t._v("现在，我们要做的事情是，将示例中的"),e("code",[t._v("engine.runtime")]),t._v("装到一个"),e("code",[t._v("正弦函数")]),t._v("中，这意味着该值将无限在正弦波 -1 和 +1 之间不断上下移动。")]),t._v(" "),e("p",[t._v("为此，我们可以使用"),e("code",[t._v("Math")]),t._v("全局对象，你可能已经从类似"),e("code",[t._v("JavaScript")]),t._v("的语言中知道了这一点：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param {Vec3} value - for property 'origin'\n * @return {Vec3} - update current property value\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tvalue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("engine"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runtime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("乍一看可能令人困惑，但本质上这是在利用"),e("code",[t._v("Math.sin(engine.runtime) * 100")]),t._v("不断创建从 -100 到 +100 的值，然后将我们的"),e("code",[t._v("y")]),t._v("值从400"),e("strong",[t._v("平滑地")]),t._v("上下移动到600。")]),t._v(" "),e("p",[t._v("观看以下视频查看结果：")]),t._v(" "),e("video",{attrs:{width:"100%",controls:""}},[e("source",{attrs:{src:t.$withBase("/videos/scenescript_vec3_sine_movement.mp4"),type:"video/mp4"}}),t._v("\n  Your browser does not support the video tag.\n")]),t._v(" "),e("h2",{attrs:{id:"调试scenescript"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#调试scenescript"}},[t._v("#")]),t._v(" 调试SceneScript")]),t._v(" "),e("p",[t._v("如果你对脚本的行为感到困惑或遇到任何错误，请务必查看默认情况下位于编辑器窗口底部的"),e("strong",[t._v("日志")]),t._v("选项卡。在脚本执行期间，任何错误和警告都将打印在那里。")]),t._v(" "),e("p",[t._v("每当场景行为与预期不符时，我们建议采用的方法是使用"),e("code",[t._v("console.log()")]),t._v("函数。此函数可以让你打印任何变量的值，这有助于了解应用程序的行为。")]),t._v(" "),e("p",[t._v("请确保在发布壁纸之前从代码中删除了所有的"),e("code",[t._v("console.log()")]),t._v("，因为日志文件的调用可能会对性能产生负面影响。请参考以下代码片段，从我们前面的代码示例中打印"),e("code",[t._v("value.y")]),t._v("的值到编辑器日志：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @param {Vec3} value - for property 'origin'\n * @return {Vec3} - update current property value\n */")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tvalue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("engine"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runtime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: REMOVE BEFORE PUBLISHING")]),t._v("\n\tconsole"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("如果你现在使用编辑器中的"),e("strong",[t._v("运行预览")]),t._v("功能，你将看到每当调用"),e("code",[t._v("update()")]),t._v("函数时，Wallpaper Engine是如何连续打印编辑器日志中的值。请观看以下视频，了解实际操作：")]),t._v(" "),e("video",{attrs:{width:"100%",controls:""}},[e("source",{attrs:{src:t.$withBase("/videos/scenescript_vec3_sine_debug.mp4"),type:"video/mp4"}}),t._v("\n  Your browser does not support the video tag.\n")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("通常，在编辑器中调试SceneScript代码的行为就足够了。但在某些情况下，你可能希望在将壁纸应用于桌面时对其进行调试。在这种情况下，你可以在Wallpaper Engine设置的"),e("strong",[t._v("常规")]),t._v("选项卡中将"),e("strong",[t._v("日志级别")]),t._v("设置为"),e("strong",[t._v("完整记录")]),t._v("。这样Wallpaper Engine将记录位于"),e("code",[t._v("wallpaper_engine")]),t._v("目录中的Wallpaper Engine日志文件中的所有"),e("code",[t._v("console.log()")]),t._v("调用，默认情况下你可以在此处找到该文件：")]),t._v(" "),e("p",[t._v("C:\\Program Files (x86)\\Steam\\steamapps\\common\\wallpaper_engine\\log.txt")])]),t._v(" "),e("h2",{attrs:{id:"更多关于scenescript"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更多关于scenescript"}},[t._v("#")]),t._v(" 更多关于SceneScript")]),t._v(" "),e("p",[t._v("如果你完成了本页的学习，那么你应该对SceneScript的基础知识有了很好的了解。请务必查看"),e("a",{attrs:{href:"/wallpaper-engine-docs/scene/scenescript/reference"}},[t._v("SceneScript语言参考")]),t._v("，以大致了解SceneScript提供的所有类、全局变量、事件和模块。")]),t._v(" "),e("p",[t._v("此外，请查看我们的"),e("a",{attrs:{href:"/wallpaper-engine-docs/scene/scenescript/tutorials"}},[t._v("SceneScript教程")]),t._v("，了解SceneScript的一些特定和高级用例。")])])}),[],!1,null,null,null);s.default=n.exports}}]);